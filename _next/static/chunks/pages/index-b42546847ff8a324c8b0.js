(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7116:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ie}});var r=n(9008),i=n(7294),o=n(3789),a=n(2809),u=function(e,t,n){for(var r=[],i=function(){var e={x:s(0,t),y:s(0,n)};!r.some((function(t){return t.x===e.x&&t.y===e.y}))&&r.push(e)};r.length<e;)i();return r},s=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},c=function(e,t,n){var r=0;return n.forEach((function(n){return[0,1].includes(Math.abs(n.x-e))&&[0,1].includes(Math.abs(t-n.y))&&r++})),r},l=function(e,t){return e.x===t.x&&e.y===t.y};function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=[],p=function e(t,n,r,i,o){var a=x(t),u=h(t,n,i,o),s=g(a,u);if(u&&m.push(t),!s){var l,d=[-1,0,1],p=f([-1,0,1].map((function(e){return d.map((function(t){return[e,t]}))})).reduce((function(e,t){var n=t.filter((function(e){return"[0,0]"!==JSON.stringify(e)}));return e.concat(n)}),[]));try{for(p.s();!(l=p.n()).done;){var b=l.value,y=t.x+b[0],z=t.y+b[1];e({x:y,y:z,value:c(y,z,r)},n,r,i,o)}}catch(v){p.e(v)}finally{p.f()}}},b=function(e,t,n,r,i,o){return 0<e&&e<9?[{x:t,y:n,value:e}]:(p({x:t,y:n,value:e},r,i,[],o),m)},h=function(e,t,n,r){var i=y(e,t,r),o=function(e,t){var n,r=!1,i=f(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;l(o,e)&&(r=!0)}}catch(a){i.e(a)}finally{i.f()}return!r&&t.push({x:e.x,y:e.y}),r}(e,n);return i&&!o},y=function(e,t,n){var r=function(e,t){return 0<=e.x&&e.x<=t.sizeX-1&&0<=e.y&&e.y<=t.sizeY-1}(e,n),i=!0;return r&&(i=9===t[e.y][e.x]),r&&i},x=function(e){return 0!==e.value},g=function(e,t){return!t||e},z=n(9163),v={boardsize:{sizex:9,sizey:9}},S=z.ZP.div.withConfig({displayName:"boardStyle__Board",componentId:"sc-1rbrc4z-0"})(["position:relative;top:0;left:6px;width:","px;height:","px;margin:10px 0;background-color:grey;border:inset 10px;"],(function(e){return 20+50*e.boardsize.sizex}),(function(e){return 20+50*e.boardsize.sizey}));S.defaultProps=v;var j=z.ZP.div.withConfig({displayName:"boardStyle__BoardHeader",componentId:"sc-1rbrc4z-1"})(["position:relative;top:0;left:6px;display:flex;justify-content:space-between;width:","px;height:90px;margin:10px 0;overflow:hidden;background-color:grey;border:inset 10px;"],(function(e){return 20+50*e.boardsize.sizex}));j.defaultProps=v;var w=z.ZP.div.withConfig({displayName:"boardStyle__BoardFrame",componentId:"sc-1rbrc4z-2"})(["width:","px;height:","px;background-color:#d7d2d8;border:outset 6px;"],(function(e){return 40+50*e.boardsize.sizex}),(function(e){return 130+50*e.boardsize.sizey}));w.defaultProps=v;var C=z.ZP.div.withConfig({displayName:"boardStyle__Block",componentId:"sc-1rbrc4z-3"})(["float:left;width:50px;height:50px;background-image:url(icons.png);background-repeat:no-repeat;background-position:","px -4px;background-size:650px 55px;border:1px solid;"],(function(e){return 45-45*e.number}));C.defaultProps={number:0};var k=(0,z.ZP)(C).withConfig({displayName:"boardStyle__PushedBlock",componentId:"sc-1rbrc4z-4"})(["background-color:white;border-color:black;"]),N=(0,z.ZP)(C).withConfig({displayName:"boardStyle__UnPushedBlock",componentId:"sc-1rbrc4z-5"})(["cursor:pointer;border-color:white;:hover{border-bottom-color:transparent;transform:translateY(0.1875em);}"]),_=(0,z.ZP)(C).withConfig({displayName:"boardStyle__BomBlock",componentId:"sc-1rbrc4z-6"})(["background-color:red;background-position:-460px -4px;"]),P=(0,z.ZP)(N).withConfig({displayName:"boardStyle__FlagBlock",componentId:"sc-1rbrc4z-7"})(["background-position:-415px -4px;"]),I=(0,z.ZP)(N).withConfig({displayName:"boardStyle__HatenaBlock",componentId:"sc-1rbrc4z-8"})(["background-position:-370px -4px;"]),Z=z.ZP.div.withConfig({displayName:"boardStyle__NumIcon",componentId:"sc-1rbrc4z-9"})(["display:flex;align-content:space-between;float:left;width:1.6em;height:50px;margin-top:12px;font-family:monospace;font-size:46px;color:red;text-align:center;vertical-align:middle;background-color:black;"]),O=(0,z.ZP)(Z).withConfig({displayName:"boardStyle__FlagNum",componentId:"sc-1rbrc4z-10"})(["margin-right:0;margin-left:30px;"]),X=(0,z.ZP)(N).withConfig({displayName:"boardStyle__FaceIcon",componentId:"sc-1rbrc4z-11"})(["display:flex;float:left;margin-top:12px;margin-bottom:0;background-position:"," -4px;background-size:605px 50px;border:outset 4px;"],(function(e){return e.number})),Y=(0,z.ZP)(Z).withConfig({displayName:"boardStyle__TimerNum",componentId:"sc-1rbrc4z-12"})(["margin-right:30px;margin-left:0;"]),M=n(5893),B=function(e){var t=e.states,n=e.funs,r={sizex:t.boardSize.sizeX,sizey:t.boardSize.sizeY};return(0,M.jsxs)(j,{boardsize:r,children:[(0,M.jsx)(O,{children:"000".concat(t.boms.length-t.flgPosition.length).slice(-3)}),(0,M.jsx)(X,{number:D(t.gameState),boardSize:t.boardSize,onClick:function(){return n.refreshState()},children:(0,M.jsx)("a",{})}),(0,M.jsx)(Y,{children:"000".concat(t.count).slice(-3)})]})},D=function(e){return 0===e||-1===e?11.6:1===e?12.55:13.5},F=function(e){var t=e.states,n=e.funs,r={sizex:t.boardSize.sizeX,sizey:t.boardSize.sizeY};return(0,M.jsx)(S,{boardsize:r,children:t.board.map((function(e,r){return e.map((function(e,i){return(0,M.jsx)(G,{states:t,vars:{x:i,y:r,num:e},funs:n},"".concat(i,"-").concat(r))}))}))})},G=function(e){var t=e.states,n=e.vars,r=e.funs,i=t.gameState,o=t.flgPosition,a=[t.boms,n.num,n.x,n.y],u=a[0],s=a[1],c=a[2],l=a[3],f=[0,-1].includes(i);return 9===n.num?(0,M.jsx)(N,{onClick:function(){return f&&r.onClick(c,l)},onContextMenu:function(){return f&&o.length<u.length&&r.onContextMenu(c,l)},number:0}):(0,M.jsx)(W,{states:{flgPosition:o,boms:u},vars:{canPlayGame:f,x:c,y:l,num:s},funs:{onContextMenu:r.onContextMenu}})},W=function(e){var t=e.states,n=e.vars,r=e.funs;return-1===n.num?(0,M.jsx)(_,{number:0}):99===n.num?(0,M.jsx)(P,{onContextMenu:function(){return n.canPlayGame&&r.onContextMenu(n.x,n.y)},number:0}):100===n.num?(0,M.jsx)(I,{onContextMenu:function(){return n.canPlayGame&&t.flgPosition.length<t.boms.length&&r.onContextMenu(n.x,n.y)},number:0}):(0,M.jsx)(k,{number:n.num})};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=function(e){var t=e.parentStates,n=A({},e.funs),r=n.setGameState,i=n.setPushedBlockNum,a=n.setFlgPosition,u=n.setBoard,s=n.refreshState,f=n.checkGameStart,d=n.setGameover,p=n.setGameClear,h=A({},t),y=h.board,x=h.flgPosition,g=h.boms,z=h.pushedBlockNum,v=h.boardSize,S=function(e,t){t.forEach((function(t){e[t.y][t.x]=t.value})),u(e)},j={sizex:v.sizeX,sizey:v.sizeY};return(0,M.jsxs)(w,{boardsize:j,children:[(0,M.jsx)(B,{states:t,funs:{refreshState:s}}),(0,M.jsx)(F,{states:t,funs:{onClick:function(e,t){f();var n=g.some((function(n){return l({x:e,y:t},n)})),r=JSON.parse(JSON.stringify(y));if(n){var u=g.map((function(e){return{x:e.x,y:e.y,value:-1}}));return d(),void S(r,u)}var s=c(e,t,g),h=function(e,t,n,r,i,o,a){return m=[],b(r,i,o,t,n,a)}(0,y,g,s,e,t,v),x=z+h.length;i(x),S(r,function(e,t){if(t!==v.sizeX*v.sizeY-g.length)return e;p();var n=g.map((function(e){return{x:e.x,y:e.y,value:99}})),r=g.map((function(e){return{x:e.x,y:e.y}}));return a(r),[].concat((0,o.Z)(n),(0,o.Z)(e))}(h,x))},onContextMenu:function(e,t){f();var n,i,s=function(e){return(0,o.Z)(x).filter((function(t){return!l(t,e)}))},c=JSON.parse(JSON.stringify(y)),d={x:e,y:t},m=99===y[t][e],b=100===y[t][e],h=[];m?(c[t][e]=9,h=s(d)):b?(c[t][e]=99,h=[].concat((0,o.Z)(x),[d])):(c[t][e]=100,h=s(d)),i=g,(n=h).length===i.length&&n.some((function(e){return i.some((function(t){return l(e,t)}))}))?p():r(0),a(h),u(c)}}})]})},q=function(e,t){return(0,o.Z)(Array(e)).map((function(){return Array(t).fill(9)}))},T={difficulty:"easy",bomNum:10,sizeX:9,sizeY:9,board:q(9,9)},V={difficulty:"middle",bomNum:40,sizeX:16,sizeY:16,board:q(16,16)},H={difficulty:"difficult",bomNum:99,sizeX:30,sizeY:16,board:q(16,30)},U={difficulty:"special",bomNum:150,sizeX:30,sizeY:30,board:q(30,30)},L=0,R=-1,$=[],K=n(318),Q=z.ZP.input.withConfig({displayName:"specialForm__StyledInput",componentId:"sc-1m1x9wt-0"})(["width:4em;"]),ee=function(e){var t=e.funs,n=i.useState(U.sizeX),r=(0,K.Z)(n,2),o=r[0],a=r[1],u=i.useState(U.sizeY),s=(0,K.Z)(u,2),c=s[0],l=s[1],f=i.useState(U.bomNum),d=(0,K.Z)(f,2),m=d[0],p=d[1];return(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{htmlFor:"sizeX",children:"\u5e45:"}),(0,M.jsx)(Q,{type:"number",defaultValue:U.sizeX,id:"sizeX",onChange:function(e){return t=e,void a((function(){return parseInt(t.target.value)}));var t}}),(0,M.jsx)("label",{htmlFor:"sizeY",children:"\u9ad8\u3055:"}),(0,M.jsx)(Q,{type:"number",defaultValue:U.sizeY,id:"sizeY",onChange:function(e){return t=e,void l((function(){return parseInt(t.target.value)}));var t}}),(0,M.jsx)("label",{htmlFor:"bomNum",children:"\u30de\u30b9:"}),(0,M.jsx)(Q,{type:"number",defaultValue:U.bomNum,id:"bomNum",onChange:function(e){return function(e){var t=o*c/2,n=parseInt(e.target.value),r=n<=t?n:t;p((function(){return r}))}(e)}}),(0,M.jsx)("button",{onClick:function(){return function(){var e=q(c,o),n={difficulty:"special",bomNum:m,sizeX:o,sizeY:c,board:e};t.refreshStateWithDifficulty(n),t.setSpecialFirstState(n)}()},children:"\u66f4\u65b0 "})]})},te=function(e){var t=e.states,n=e.funs,r=(0,i.useState)(U),o=r[0],a=r[1];return"special"===t.nowFirstState.difficulty?(0,M.jsxs)("div",{children:[(0,M.jsx)("button",{onClick:function(){return n.refreshStateWithDifficulty(T)},children:"\u521d\u7d1a "}),(0,M.jsx)("button",{onClick:function(){return n.refreshStateWithDifficulty(V)},children:"\u4e2d\u7d1a "}),(0,M.jsx)("button",{onClick:function(){return n.refreshStateWithDifficulty(H)},children:"\u4e0a\u7d1a"}),(0,M.jsx)("button",{onClick:function(){return n.refreshStateWithDifficulty(o)},children:"\u30b9\u30da\u30b7\u30e3\u30eb"}),(0,M.jsx)(ee,{funs:{refreshStateWithDifficulty:n.refreshStateWithDifficulty,setSpecialFirstState:a}})]}):(0,M.jsxs)("div",{children:[(0,M.jsx)("button",{onClick:function(){return n.refreshStateWithDifficulty(T)},children:"\u521d\u7d1a "}),(0,M.jsx)("button",{onClick:function(){return n.refreshStateWithDifficulty(V)},children:"\u4e2d\u7d1a "}),(0,M.jsx)("button",{onClick:function(){return n.refreshStateWithDifficulty(H)},children:"\u4e0a\u7d1a"}),(0,M.jsx)("button",{onClick:function(){return n.refreshStateWithDifficulty(o)},children:"\u30b9\u30da\u30b7\u30e3\u30eb"})]})},ne=z.ZP.div.withConfig({displayName:"page__Container",componentId:"sc-1qm7lto-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;min-height:100vh;padding:0 0.5rem;-moz-transform:",";"],(function(e){return 1/e.boardsize.sizey+2})),re=z.ZP.main.withConfig({displayName:"page__Main",componentId:"sc-1qm7lto-1"})(["display:flex;flex:1;flex-direction:column;align-items:center;justify-content:center;padding:5rem 0;"]),ie=(z.ZP.footer.withConfig({displayName:"page__Footer",componentId:"sc-1qm7lto-2"})(["display:flex;align-items:center;justify-content:center;width:100%;height:100px;border-top:1px solid #eaeaea;a{display:flex;flex-grow:1;align-items:center;justify-content:center;}"]),z.ZP.span.withConfig({displayName:"page__Logo",componentId:"sc-1qm7lto-3"})(["height:1em;margin-left:0.5rem;"]),function(){"undefined"!==typeof document&&(document.oncontextmenu=function(){return!1});var e=(0,i.useState)(T),t=e[0],n=e[1],o=function(){c(R),b($),x(L),w(0),Z()},a=(0,i.useState)(R),s=a[0],c=a[1],l=(0,i.useState)(t.board),f=l[0],d=l[1],m=(0,i.useState)($),p=m[0],b=m[1],h=(0,i.useState)(L),y=h[0],x=h[1],g=(0,i.useState)(u(t.bomNum,t.sizeX,t.sizeY)),z=g[0],v=g[1],S=(0,i.useState)(0),j=S[0],w=S[1],C=(0,i.useState)({sizeX:t.sizeX,sizeY:t.sizeY}),k=C[0],N=C[1],_={gameState:s,board:f,flgPosition:p,count:y,boms:z,pushedBlockNum:j,boardSize:k},P=(0,i.useRef)(null),I=(0,i.useCallback)((function(){null===P.current&&(P.current=window.setInterval((function(){x((function(e){return e+1}))}),1e3))}),[]),Z=(0,i.useCallback)((function(){null!==P.current&&(clearInterval(P.current),P.current=null)}),[]),O={sizex:k.sizeX,sizey:k.sizeY};return(0,M.jsxs)(ne,{boardsize:O,children:[(0,M.jsxs)(r.default,{children:[(0,M.jsx)("title",{children:"Create Next App"}),(0,M.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,M.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,M.jsxs)(re,{children:[(0,M.jsx)(te,{states:{boardSize:k,boms:z,nowFirstState:t},funs:{refreshStateWithDifficulty:function(e){o(),n(e),N({sizeX:e.sizeX,sizeY:e.sizeY}),d(e.board),v(u(e.bomNum,e.sizeX,e.sizeY))}}}),(0,M.jsx)(J,{parentStates:_,funs:{refreshState:function(){o(),N({sizeX:t.sizeX,sizeY:t.sizeY}),d(t.board),v(u(t.bomNum,t.sizeX,t.sizeY))},checkGameStart:function(){-1===s&&(c(0),I())},setGameover:function(){c(99),Z()},setGameClear:function(){c(1),Z()},setGameState:c,setPushedBlockNum:w,setFlgPosition:b,setBoard:d}})]})]})})},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7116)}])}},function(e){e.O(0,[835,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);