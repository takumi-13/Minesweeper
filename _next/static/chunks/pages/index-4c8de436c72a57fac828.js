(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6643:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return me}});var r=n(9008),i=n(7294),o=n(3789),a=n(2809),s=function(e,t,n){for(var r=[],i=function(){var e={x:c(0,t),y:c(0,n)};!r.some((function(t){return t.x===e.x&&t.y===e.y}))&&r.push(e)};r.length<e;)i();return r},c=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},u=function(e,t,n){var r=0;return n.forEach((function(n){return[0,1].includes(Math.abs(n.x-e))&&[0,1].includes(Math.abs(t-n.y))&&r++})),r},f=function(e,t,n){return e.x===t&&e.y===n},l=function(e,t){return e.x===t.x&&e.y===t.y};function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=[],b=function e(t,n,r,i,o){var a=g(t),s=h(t,n,i,o),c=v(a,s);if(s&&m.push(t),!c){var f,l=[-1,0,1],p=d([-1,0,1].map((function(e){return l.map((function(t){return[e,t]}))})).reduce((function(e,t){var n=t.filter((function(e){return"[0,0]"!==JSON.stringify(e)}));return e.concat(n)}),[]));try{for(p.s();!(f=p.n()).done;){var b=f.value,y=t.x+b[0],x=t.y+b[1];e({x:y,y:x,value:u(y,x,r)},n,r,i,o)}}catch(z){p.e(z)}finally{p.f()}}},y=function(e,t,n,r,i,o){return 0<e&&e<9?[{x:t,y:n,value:e}]:(b({x:t,y:n,value:e},r,i,[],o),m)},h=function(e,t,n,r){var i=x(e,t,r),o=function(e,t){var n,r=!1,i=d(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;l(o,e)&&(r=!0)}}catch(a){i.e(a)}finally{i.f()}return!r&&t.push({x:e.x,y:e.y}),r}(e,n);return i&&!o},x=function(e,t,n){var r=function(e,t){return 0<=e.x&&e.x<=t.sizeX-1&&0<=e.y&&e.y<=t.sizeY-1}(e,n),i=!0;return r&&(i=9===t[e.y][e.x]),r&&i},g=function(e){return 0!==e.value},v=function(e,t){return!t||e},z=n(9163),S={boardsize:{sizex:9,sizey:9}},w=z.ZP.div.withConfig({displayName:"boardStyle__Board",componentId:"sc-1rbrc4z-0"})(["position:relative;bottom:1px;left:6px;width:","px;height:","px;margin:10px 2px;background-color:#8a8a8a;border:inset 10px white;border-top-color:#c4c4c4;border-left-color:#c4c4c4;"],(function(e){return 20+50*e.boardsize.sizex}),(function(e){return 20+50*e.boardsize.sizey}));w.defaultProps=S;var j=z.ZP.div.withConfig({displayName:"boardStyle__BoardHeader",componentId:"sc-1rbrc4z-1"})(["position:relative;left:6px;display:flex;align-content:center;justify-content:space-between;width:","px;height:90px;margin:10px 0;overflow:hidden;background-color:#c4c4c4;border:inset 10px white;border-top-color:#c4c4c4;border-left-color:#c4c4c4;"],(function(e){return 20+50*e.boardsize.sizex}));j.defaultProps=S;var N=z.ZP.div.withConfig({displayName:"boardStyle__BoardFrame",componentId:"sc-1rbrc4z-2"})(["width:","px;height:","px;background-color:#d4d4d4;border:outset 10px;border-top-color:white;border-right-color:#c4c4c4;border-bottom-color:#c4c4c4;border-left-color:white;"],(function(e){return 55+50*e.boardsize.sizex}),(function(e){return 160+50*e.boardsize.sizey}));N.defaultProps=S;var _=z.ZP.div.withConfig({displayName:"boardStyle__Block",componentId:"sc-1rbrc4z-3"})(["float:left;width:50px;height:50px;background-color:#d4d4d4;background-image:url(icons.png);background-repeat:no-repeat;background-position:","px 7px;background-size:540px 36px;border:1px solid;"],(function(e){return D(e.number)}));_.defaultProps={number:0};var k=(0,z.ZP)(_).withConfig({displayName:"boardStyle__PushedBlock",componentId:"sc-1rbrc4z-4"})(["background-color:#c4c4c4;border:inset 1px;border-color:#8a8a8a;"]),P=(0,z.ZP)(_).withConfig({displayName:"boardStyle__UnPushedBlock",componentId:"sc-1rbrc4z-5"})(["cursor:pointer;:hover{border-bottom-color:transparent;transform:translateY(0.1875em);}border:outset 6px;border-color:white;border-right-color:#c4c4c4;border-bottom-color:#c4c4c4;"]),C=(0,z.ZP)(_).withConfig({displayName:"boardStyle__BomBlock",componentId:"sc-1rbrc4z-6"})(["background-color:red;background-position:-425px 5px;background-size:600px 40px;"]),I=(0,z.ZP)(P).withConfig({displayName:"boardStyle__FlagBlock",componentId:"sc-1rbrc4z-7"})(["background-position:-345px 1px;"]),Z=(0,z.ZP)(P).withConfig({displayName:"boardStyle__HatenaBlock",componentId:"sc-1rbrc4z-8"})(["background-position:-307px 1px;"]),O=z.ZP.div.withConfig({displayName:"boardStyle__NumIcon",componentId:"sc-1rbrc4z-9"})(["display:flex;float:left;width:1.5em;height:1em;margin-top:14px;font-family:monospace;font-size:46px;color:red;text-align:center;vertical-align:baseline;background-color:black;"]),X=(0,z.ZP)(O).withConfig({displayName:"boardStyle__FlagNum",componentId:"sc-1rbrc4z-10"})(["margin-right:0;margin-left:20px;"]),Y=(0,z.ZP)(P).withConfig({displayName:"boardStyle__FaceIcon",componentId:"sc-1rbrc4z-11"})(["display:flex;float:left;margin-top:12px;background-position:","px 1px;background-size:540px 36px;border:outset 6px;"],(function(e){return F(e.number)})),B=(0,z.ZP)(O).withConfig({displayName:"boardStyle__TimerNum",componentId:"sc-1rbrc4z-12"})(["margin-right:20px;margin-left:0;"]),D=function(e){return[1e3,6,-32,-71,-110,-148,-186,-226,-265][e]},F=function(e){return[-424,-463,-501][M(e)]},M=function(e){return 0===e||-1===e?0:1===e?1:2},A=n(5893),W=function(e){var t=e.states,n=e.funs,r={sizex:t.boardSize.sizeX,sizey:t.boardSize.sizeY};return(0,A.jsxs)(j,{boardsize:r,children:[(0,A.jsx)(X,{children:"000".concat(t.boms.length-t.flgPosition.length).slice(-3)}),(0,A.jsx)(Y,{number:t.gameState,onClick:function(){return n.refreshState()}}),(0,A.jsx)(B,{children:"000".concat(t.count).slice(-3)})]})},G=function(e){var t=e.states,n=e.funs,r={sizex:t.boardSize.sizeX,sizey:t.boardSize.sizeY};return(0,A.jsx)(w,{boardsize:r,children:t.board.map((function(e,r){return e.map((function(e,i){return(0,A.jsx)(E,{states:t,vars:{x:i,y:r,num:e},funs:n},"".concat(i,"-").concat(r))}))}))})},E=function(e){var t=e.states,n=e.vars,r=e.funs,i=t.gameState,o=t.flgPosition,a=[t.boms,n.num,n.x,n.y],s=a[0],c=a[1],u=a[2],f=a[3],l=[0,-1].includes(i);return 9===n.num?(0,A.jsx)(P,{onClick:function(){return l&&r.onClick(u,f)},onContextMenu:function(){return l&&o.length<s.length&&r.onContextMenu(u,f)},number:0}):(0,A.jsx)(J,{states:{flgPosition:o,boms:s},vars:{canPlayGame:l,x:u,y:f,num:c},funs:{onContextMenu:r.onContextMenu}})},J=function(e){var t=e.states,n=e.vars,r=e.funs;return-1===n.num?(0,A.jsx)(C,{number:0}):99===n.num?(0,A.jsx)(I,{onContextMenu:function(){return n.canPlayGame&&r.onContextMenu(n.x,n.y)},number:0}):100===n.num?(0,A.jsx)(Z,{onContextMenu:function(){return n.canPlayGame&&t.flgPosition.length<t.boms.length&&r.onContextMenu(n.x,n.y)},number:0}):(0,A.jsx)(k,{number:n.num})};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(e){var t=e.parentStates,n=V({},e.funs),r=n.setGameState,i=n.setPushedBlockNum,a=n.setFlgPosition,s=n.setBoard,d=n.refreshState,p=n.checkGameStart,b=n.setGameover,h=n.setGameClear,x=n.setBoms,g=V({},t),v=g.board,z=g.flgPosition,S=g.boms,w=g.pushedBlockNum,j=g.boardSize,_=function(){var e=S.map((function(e){return{x:e.x,y:e.y,value:-1}}));return b(),e},k=function(e,t){var n=u(e,t,S),r=function(e,t,n,r,i,o,a){return m=[],y(r,i,o,t,n,a)}(0,v,S,n,e,t,j),s=w+r.length;return i(s),function(e,t){if(t!==j.sizeX*j.sizeY-S.length)return e;h();var n=S.map((function(e){return{x:e.x,y:e.y,value:99}})),r=S.map((function(e){return{x:e.x,y:e.y}}));return a(r),[].concat((0,o.Z)(n),(0,o.Z)(e))}(r,s)},P=function(e,t){var n=S.length;return x(function(e,t,n,r){for(var i=[],o=function(){var n={x:c(0,r.sizeX),y:c(0,r.sizeY)};!i.some((function(e){return e.x===n.x&&e.y===n.y}))&&!f(n,e,t)&&i.push(n)};i.length<n;)o();return i}(e,t,n,j)),k(e,t)},C={sizex:j.sizeX,sizey:j.sizeY};return(0,A.jsxs)(N,{boardsize:C,children:[(0,A.jsx)(W,{states:t,funs:{refreshState:d}}),(0,A.jsx)(G,{states:t,funs:{onClick:function(e,t){var n=S.some((function(n){return l({x:e,y:t},n)})),r=p();!function(e,t){t.forEach((function(t){e[t.y][t.x]=t.value})),s(e)}(JSON.parse(JSON.stringify(v)),n?r?P(e,t):_():k(e,t))},onContextMenu:function(e,t){p();var n,i,c=function(e){return(0,o.Z)(z).filter((function(t){return!l(t,e)}))},u=JSON.parse(JSON.stringify(v)),f={x:e,y:t},d=99===v[t][e],m=100===v[t][e],b=[];d?(u[t][e]=9,b=c(f)):m?(u[t][e]=99,b=[].concat((0,o.Z)(z),[f])):(u[t][e]=100,b=c(f)),i=S,(n=b).length===i.length&&n.some((function(e){return i.some((function(t){return l(e,t)}))}))?h():r(0),a(b),s(u)}}})]})},H=function(e,t){return(0,o.Z)(Array(e)).map((function(){return Array(t).fill(9)}))},U={difficulty:"easy",bomNum:10,sizeX:9,sizeY:9,board:H(9,9)},L={difficulty:"middle",bomNum:40,sizeX:16,sizeY:16,board:H(16,16)},R={difficulty:"difficult",bomNum:99,sizeX:30,sizeY:16,board:H(16,30)},$={difficulty:"special",bomNum:150,sizeX:30,sizeY:30,board:H(30,30)},K=0,Q=-1,ee=[],te=z.ZP.button.withConfig({displayName:"difficultyButton__MyButton",componentId:"sc-iekrb-0"})(["padding:0;margin-right:25px;font-size:26px;font-weight:bold;color:black;cursor:pointer;background-color:white;border:0;&[data-label='false']{:hover{color:#00f;text-decoration:underline;}color:#2462ff;}"]),ne=function(e){var t=e.funs,n=e.consts;return(0,A.jsx)(te,{"data-label":n.isActive,onClick:function(){return t.refreshStateWithDifficulty(n.firstState)},children:n.displayName})},re=n(318),ie=z.ZP.input.withConfig({displayName:"specialForm__StyledInput",componentId:"sc-1m1x9wt-0"})(["width:4em;margin-right:1em;font-size:24px;border:2px solid #ddd;"]),oe=z.ZP.button.withConfig({displayName:"specialForm__StyledButton",componentId:"sc-1m1x9wt-1"})(["width:4em;font-size:20px;font-weight:bold;cursor:pointer;background-color:white;:hover{background-color:rgba(212,212,212,0.4);}"]),ae=z.ZP.label.withConfig({displayName:"specialForm__StyledLabel",componentId:"sc-1m1x9wt-2"})(["font-size:24px;font-weight:bold;"]),se=z.ZP.div.withConfig({displayName:"specialForm__StyledDiv",componentId:"sc-1m1x9wt-3"})(["padding-bottom:0.25em;"]),ce=function(e){var t=e.funs,n=i.useState($.sizeX),r=(0,re.Z)(n,2),o=r[0],a=r[1],s=i.useState($.sizeY),c=(0,re.Z)(s,2),u=c[0],f=c[1],l=i.useState($.bomNum),d=(0,re.Z)(l,2),p=d[0],m=d[1];return(0,A.jsxs)(se,{children:[(0,A.jsx)(ae,{htmlFor:"sizeX",children:"\u5e45\uff1a"}),(0,A.jsx)(ie,{type:"number",defaultValue:$.sizeX,id:"sizeX",onChange:function(e){return t=e,void a((function(){return parseInt(t.target.value)}));var t}}),(0,A.jsx)(ae,{htmlFor:"sizeY",children:"\u9ad8\u3055\uff1a"}),(0,A.jsx)(ie,{type:"number",defaultValue:$.sizeY,id:"sizeY",onChange:function(e){return t=e,void f((function(){return parseInt(t.target.value)}));var t}}),(0,A.jsx)(ae,{htmlFor:"bomNum",children:"\u30de\u30b9\uff1a"}),(0,A.jsx)(ie,{type:"number",defaultValue:$.bomNum,id:"bomNum",onChange:function(e){return function(e){var t=o*u/2,n=parseInt(e.target.value),r=n<=t?n:t;m((function(){return r}))}(e)}}),(0,A.jsx)(oe,{onClick:function(){return function(){var e=H(u,o),n={difficulty:"special",bomNum:p,sizeX:o,sizeY:u,board:e};t.refreshStateWithDifficulty(n),t.setSpecialFirstState(n)}()},children:"\u66f4\u65b0 "})]})},ue=z.ZP.div.withConfig({displayName:"difficultySelector__DifficultySelectorDiv",componentId:"sc-pakp5b-0"})(["display:flex;flex-direction:column;padding:0 1em;"]),fe=z.ZP.div.withConfig({displayName:"difficultySelector__DifficultyButtonDiv",componentId:"sc-pakp5b-1"})(["padding-bottom:0.25em;"]),le=function(e){var t=e.states,n=e.funs,r=(0,i.useState)($),o=r[0],a=r[1],s=n.refreshStateWithDifficulty,c={easy:"easy"===t.nowFirstState.difficulty,middle:"middle"===t.nowFirstState.difficulty,difficult:"difficult"===t.nowFirstState.difficulty,special:"special"===t.nowFirstState.difficulty},u={easy:{displayName:"\u521d\u7d1a",firstState:U,isActive:c.easy},middle:{displayName:"\u4e2d\u7d1a",firstState:L,isActive:c.middle},difficult:{displayName:"\u4e0a\u7d1a",firstState:R,isActive:c.difficult},special:{displayName:"\u30b9\u30da\u30b7\u30e3\u30eb",firstState:o,isActive:c.special}};return c.special?(0,A.jsxs)(ue,{children:[(0,A.jsxs)(fe,{children:[(0,A.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.easy}),(0,A.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.middle}),(0,A.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.difficult}),(0,A.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.special})]}),(0,A.jsx)(ce,{funs:{refreshStateWithDifficulty:s,setSpecialFirstState:a}})]}):(0,A.jsx)(ue,{children:(0,A.jsxs)(fe,{children:[(0,A.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.easy}),(0,A.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.middle}),(0,A.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.difficult}),(0,A.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.special})]})})},de=z.ZP.div.withConfig({displayName:"page__Container",componentId:"sc-1qm7lto-0"})(["display:flex;justify-content:center;padding:0 0.5rem;transform:scale(0.7);transform-origin:top center;"]),pe=z.ZP.main.withConfig({displayName:"page__Main",componentId:"sc-1qm7lto-1"})(["padding:5rem 0;"]),me=function(){"undefined"!==typeof document&&(document.oncontextmenu=function(){return!1});var e=(0,i.useState)(U),t=e[0],n=e[1],o=function(){u(Q),b(ee),x(K),j(0),Z()},a=(0,i.useState)(Q),c=a[0],u=a[1],f=(0,i.useState)(t.board),l=f[0],d=f[1],p=(0,i.useState)(ee),m=p[0],b=p[1],y=(0,i.useState)(K),h=y[0],x=y[1],g=(0,i.useState)(s(t.bomNum,t.sizeX,t.sizeY)),v=g[0],z=g[1],S=(0,i.useState)(0),w=S[0],j=S[1],N=(0,i.useState)({sizeX:t.sizeX,sizeY:t.sizeY}),_=N[0],k=N[1],P={gameState:c,board:l,flgPosition:m,count:h,boms:v,pushedBlockNum:w,boardSize:_},C=(0,i.useRef)(null),I=(0,i.useCallback)((function(){null===C.current&&(C.current=window.setInterval((function(){x((function(e){return e+1}))}),1e3))}),[]),Z=(0,i.useCallback)((function(){null!==C.current&&(clearInterval(C.current),C.current=null)}),[]);return(0,A.jsxs)(de,{children:[(0,A.jsxs)(r.default,{children:[(0,A.jsx)("title",{children:"Create Next App"}),(0,A.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,A.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,A.jsxs)(pe,{children:[(0,A.jsx)(le,{states:{boardSize:_,boms:v,nowFirstState:t},funs:{refreshStateWithDifficulty:function(e){o(),n(e),k({sizeX:e.sizeX,sizeY:e.sizeY}),d(e.board),z(s(e.bomNum,e.sizeX,e.sizeY))}}}),(0,A.jsx)(q,{parentStates:P,funs:{refreshState:function(){o(),k({sizeX:t.sizeX,sizeY:t.sizeY}),d(t.board),z(s(t.bomNum,t.sizeX,t.sizeY))},checkGameStart:function(){return-1===c&&(u(0),I(),!0)},setGameover:function(){u(99),Z()},setGameClear:function(){u(1),Z()},setGameState:u,setPushedBlockNum:j,setFlgPosition:b,setBoard:d,setBoms:z}})]})]})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6643)}])}},function(e){e.O(0,[835,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);