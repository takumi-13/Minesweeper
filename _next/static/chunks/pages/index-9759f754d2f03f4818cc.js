(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6643:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return me}});var r=n(9008),i=n(7294),o=n(3789),a=n(2809),s=n(9163),c=function(e,t,n){for(var r=[],i=function(){var e={x:u(0,t),y:u(0,n)};!r.some((function(t){return t.x===e.x&&t.y===e.y}))&&r.push(e)};r.length<e;)i();return r},u=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},l=function(e,t,n){var r=0;return n.forEach((function(n){return[0,1].includes(Math.abs(n.x-e))&&[0,1].includes(Math.abs(t-n.y))&&r++})),r},f=function(e,t){return e.x===t.x&&e.y===t.y};function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=[],b=function e(t,n,r,i,o){var a=g(t),s=y(t,n,i,o),c=z(a,s);if(s&&p.push(t),!c){var u,f=[-1,0,1],m=d([-1,0,1].map((function(e){return f.map((function(t){return[e,t]}))})).reduce((function(e,t){var n=t.filter((function(e){return"[0,0]"!==JSON.stringify(e)}));return e.concat(n)}),[]));try{for(m.s();!(u=m.n()).done;){var b=u.value,h=t.x+b[0],x=t.y+b[1];e({x:h,y:x,value:l(h,x,r)},n,r,i,o)}}catch(v){m.e(v)}finally{m.f()}}},h=function(e,t,n,r,i,o){return 0<e&&e<9?[{x:t,y:n,value:e}]:(b({x:t,y:n,value:e},r,i,[],o),p)},y=function(e,t,n,r){var i=x(e,t,r),o=function(e,t){var n,r=!1,i=d(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;f(o,e)&&(r=!0)}}catch(a){i.e(a)}finally{i.f()}return!r&&t.push({x:e.x,y:e.y}),r}(e,n);return i&&!o},x=function(e,t,n){var r=function(e,t){return 0<=e.x&&e.x<=t.sizeX-1&&0<=e.y&&e.y<=t.sizeY-1}(e,n),i=!0;return r&&(i=9===t[e.y][e.x]),r&&i},g=function(e){return 0!==e.value},z=function(e,t){return!t||e},v={boardsize:{sizex:9,sizey:9}},S=s.ZP.div.withConfig({displayName:"boardStyle__Board",componentId:"sc-1rbrc4z-0"})(["position:relative;bottom:1px;left:6px;width:","px;height:","px;margin:10px 2px;background-color:#8a8a8a;border:inset 10px white;border-top-color:#c4c4c4;border-left-color:#c4c4c4;"],(function(e){return 20+50*e.boardsize.sizex}),(function(e){return 20+50*e.boardsize.sizey}));S.defaultProps=v;var w=s.ZP.div.withConfig({displayName:"boardStyle__BoardHeader",componentId:"sc-1rbrc4z-1"})(["position:relative;left:6px;display:flex;align-content:center;justify-content:space-between;width:","px;height:90px;margin:10px 0;overflow:hidden;background-color:#c4c4c4;border:inset 10px white;border-top-color:#c4c4c4;border-left-color:#c4c4c4;"],(function(e){return 20+50*e.boardsize.sizex}));w.defaultProps=v;var j=s.ZP.div.withConfig({displayName:"boardStyle__BoardFrame",componentId:"sc-1rbrc4z-2"})(["width:","px;height:","px;background-color:#d4d4d4;border:outset 10px;border-top-color:white;border-right-color:#c4c4c4;border-bottom-color:#c4c4c4;border-left-color:white;"],(function(e){return 55+50*e.boardsize.sizex}),(function(e){return 160+50*e.boardsize.sizey}));j.defaultProps=v;var _=s.ZP.div.withConfig({displayName:"boardStyle__Block",componentId:"sc-1rbrc4z-3"})(["float:left;width:50px;height:50px;background-color:#d4d4d4;background-image:url(icons.png);background-repeat:no-repeat;background-position:","px 7px;background-size:540px 36px;border:1px solid;"],(function(e){return D(e.number)}));_.defaultProps={number:0};var N=(0,s.ZP)(_).withConfig({displayName:"boardStyle__PushedBlock",componentId:"sc-1rbrc4z-4"})(["background-color:#c4c4c4;border:inset 1px;border-color:#8a8a8a;"]),P=(0,s.ZP)(_).withConfig({displayName:"boardStyle__UnPushedBlock",componentId:"sc-1rbrc4z-5"})(["cursor:pointer;:hover{border-bottom-color:transparent;transform:translateY(0.1875em);}border:outset 6px;border-color:white;border-right-color:#c4c4c4;border-bottom-color:#c4c4c4;"]),C=(0,s.ZP)(_).withConfig({displayName:"boardStyle__BomBlock",componentId:"sc-1rbrc4z-6"})(["background-color:red;background-position:-425px 5px;background-size:600px 40px;"]),k=(0,s.ZP)(P).withConfig({displayName:"boardStyle__FlagBlock",componentId:"sc-1rbrc4z-7"})(["background-position:-345px 1px;"]),I=(0,s.ZP)(P).withConfig({displayName:"boardStyle__HatenaBlock",componentId:"sc-1rbrc4z-8"})(["background-position:-307px 1px;"]),Z=s.ZP.div.withConfig({displayName:"boardStyle__NumIcon",componentId:"sc-1rbrc4z-9"})(["display:flex;float:left;width:1.5em;height:1em;margin-top:14px;font-family:monospace;font-size:46px;color:red;text-align:center;vertical-align:baseline;background-color:black;"]),O=(0,s.ZP)(Z).withConfig({displayName:"boardStyle__FlagNum",componentId:"sc-1rbrc4z-10"})(["margin-right:0;margin-left:20px;"]),X=(0,s.ZP)(P).withConfig({displayName:"boardStyle__FaceIcon",componentId:"sc-1rbrc4z-11"})(["display:flex;float:left;margin-top:12px;background-position:","px 1px;background-size:540px 36px;border:outset 6px;"],(function(e){return F(e.number)})),Y=(0,s.ZP)(Z).withConfig({displayName:"boardStyle__TimerNum",componentId:"sc-1rbrc4z-12"})(["margin-right:20px;margin-left:0;"]),D=function(e){return[1e3,6,-32,-71,-110,-148,-186,-226,-265][e]},F=function(e){return[-424,-463,-501][B(e)]},B=function(e){return 0===e||-1===e?0:1===e?1:2},M=n(5893),A=function(e){var t=e.states,n=e.funs,r={sizex:t.boardSize.sizeX,sizey:t.boardSize.sizeY};return(0,M.jsxs)(w,{boardsize:r,children:[(0,M.jsx)(O,{children:"000".concat(t.boms.length-t.flgPosition.length).slice(-3)}),(0,M.jsx)(X,{number:t.gameState,onClick:function(){return n.refreshState()}}),(0,M.jsx)(Y,{children:"000".concat(t.count).slice(-3)})]})},W=function(e){var t=e.states,n=e.funs,r={sizex:t.boardSize.sizeX,sizey:t.boardSize.sizeY};return(0,M.jsx)(S,{boardsize:r,children:t.board.map((function(e,r){return e.map((function(e,i){return(0,M.jsx)(G,{states:t,vars:{x:i,y:r,num:e},funs:n},"".concat(i,"-").concat(r))}))}))})},G=function(e){var t=e.states,n=e.vars,r=e.funs,i=t.gameState,o=t.flgPosition,a=[t.boms,n.num,n.x,n.y],s=a[0],c=a[1],u=a[2],l=a[3],f=[0,-1].includes(i);return 9===n.num?(0,M.jsx)(P,{onClick:function(){return f&&r.onClick(u,l)},onContextMenu:function(){return f&&o.length<s.length&&r.onContextMenu(u,l)},number:0}):(0,M.jsx)(E,{states:{flgPosition:o,boms:s},vars:{canPlayGame:f,x:u,y:l,num:c},funs:{onContextMenu:r.onContextMenu}})},E=function(e){var t=e.states,n=e.vars,r=e.funs;return-1===n.num?(0,M.jsx)(C,{number:0}):99===n.num?(0,M.jsx)(k,{onContextMenu:function(){return n.canPlayGame&&r.onContextMenu(n.x,n.y)},number:0}):100===n.num?(0,M.jsx)(I,{onContextMenu:function(){return n.canPlayGame&&t.flgPosition.length<t.boms.length&&r.onContextMenu(n.x,n.y)},number:0}):(0,M.jsx)(N,{number:n.num})};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=s.ZP.div.withConfig({displayName:"boardOrigin__StyledDiv",componentId:"sc-1e83q25-0"})(["zoom:",";"],(function(e){return e.zoom})),V=function(e){var t=e.parentStates,n=J({},e.funs),r=n.setGameState,i=n.setPushedBlockNum,a=n.setFlgPosition,s=n.setBoard,c=n.refreshState,u=n.checkGameStart,d=n.setGameover,m=n.setGameClear,b=J({},t),y=b.board,x=b.flgPosition,g=b.boms,z=b.pushedBlockNum,v=b.boardSize,S=function(e,t){t.forEach((function(t){e[t.y][t.x]=t.value})),s(e)},w={sizex:v.sizeX,sizey:v.sizeY},_=40*(1-.994*(v.sizeX/(v.sizeX+1))),N=40*(1-.994*(v.sizeY/(v.sizeY+1))),P=Math.min(_,N);return(0,M.jsx)(T,{zoom:P,children:(0,M.jsxs)(j,{boardsize:w,children:[(0,M.jsx)(A,{states:t,funs:{refreshState:c}}),(0,M.jsx)(W,{states:t,funs:{onClick:function(e,t){u();var n=g.some((function(n){return f({x:e,y:t},n)})),r=JSON.parse(JSON.stringify(y));if(n){var s=g.map((function(e){return{x:e.x,y:e.y,value:-1}}));return d(),void S(r,s)}var c=l(e,t,g),b=function(e,t,n,r,i,o,a){return p=[],h(r,i,o,t,n,a)}(0,y,g,c,e,t,v),x=z+b.length;i(x),S(r,function(e,t){if(t!==v.sizeX*v.sizeY-g.length)return e;m();var n=g.map((function(e){return{x:e.x,y:e.y,value:99}})),r=g.map((function(e){return{x:e.x,y:e.y}}));return a(r),[].concat((0,o.Z)(n),(0,o.Z)(e))}(b,x))},onContextMenu:function(e,t){u();var n,i,c=function(e){return(0,o.Z)(x).filter((function(t){return!f(t,e)}))},l=JSON.parse(JSON.stringify(y)),d={x:e,y:t},p=99===y[t][e],b=100===y[t][e],h=[];p?(l[t][e]=9,h=c(d)):b?(l[t][e]=99,h=[].concat((0,o.Z)(x),[d])):(l[t][e]=100,h=c(d)),i=g,(n=h).length===i.length&&n.some((function(e){return i.some((function(t){return f(e,t)}))}))?m():r(0),a(h),s(l)}}})]})})},H=function(e,t){return(0,o.Z)(Array(e)).map((function(){return Array(t).fill(9)}))},L={difficulty:"easy",bomNum:10,sizeX:9,sizeY:9,board:H(9,9)},U={difficulty:"middle",bomNum:40,sizeX:16,sizeY:16,board:H(16,16)},R={difficulty:"difficult",bomNum:99,sizeX:30,sizeY:16,board:H(16,30)},$={difficulty:"special",bomNum:150,sizeX:30,sizeY:30,board:H(30,30)},K=0,Q=-1,ee=[],te=s.ZP.button.withConfig({displayName:"difficultyButton__MyButton",componentId:"sc-iekrb-0"})(["margin-right:1em;font-size:24px;font-weight:bold;color:black;cursor:pointer;background-color:white;border:0;&[data-label='false']{:hover{color:#00f;text-decoration:underline;}color:#2462ff;}"]),ne=function(e){var t=e.funs,n=e.consts;return(0,M.jsx)(te,{"data-label":n.isActive,onClick:function(){return t.refreshStateWithDifficulty(n.firstState)},children:n.displayName})},re=n(318),ie=s.ZP.input.withConfig({displayName:"specialForm__StyledInput",componentId:"sc-1m1x9wt-0"})(["width:4em;margin-right:1em;font-size:20px;border:2px solid #ddd;"]),oe=s.ZP.button.withConfig({displayName:"specialForm__StyledButton",componentId:"sc-1m1x9wt-1"})(["width:4em;font-size:20px;font-weight:bold;cursor:pointer;background-color:white;:hover{background-color:rgba(212,212,212,0.4);}"]),ae=s.ZP.label.withConfig({displayName:"specialForm__StyledLabel",componentId:"sc-1m1x9wt-2"})(["font-size:20px;font-weight:bold;"]),se=s.ZP.div.withConfig({displayName:"specialForm__StyledDiv",componentId:"sc-1m1x9wt-3"})(["margin-left:0.5em;"]),ce=function(e){var t=e.funs,n=i.useState($.sizeX),r=(0,re.Z)(n,2),o=r[0],a=r[1],s=i.useState($.sizeY),c=(0,re.Z)(s,2),u=c[0],l=c[1],f=i.useState($.bomNum),d=(0,re.Z)(f,2),m=d[0],p=d[1];return(0,M.jsxs)(se,{children:[(0,M.jsx)(ae,{htmlFor:"sizeX",children:"\u5e45\uff1a"}),(0,M.jsx)(ie,{type:"number",defaultValue:$.sizeX,id:"sizeX",onChange:function(e){return t=e,void a((function(){return parseInt(t.target.value)}));var t}}),(0,M.jsx)(ae,{htmlFor:"sizeY",children:"\u9ad8\u3055\uff1a"}),(0,M.jsx)(ie,{type:"number",defaultValue:$.sizeY,id:"sizeY",onChange:function(e){return t=e,void l((function(){return parseInt(t.target.value)}));var t}}),(0,M.jsx)(ae,{htmlFor:"bomNum",children:"\u30de\u30b9\uff1a"}),(0,M.jsx)(ie,{type:"number",defaultValue:$.bomNum,id:"bomNum",onChange:function(e){return function(e){var t=o*u/2,n=parseInt(e.target.value),r=n<=t?n:t;p((function(){return r}))}(e)}}),(0,M.jsx)(oe,{onClick:function(){return function(){var e=H(u,o),n={difficulty:"special",bomNum:m,sizeX:o,sizeY:u,board:e};t.refreshStateWithDifficulty(n),t.setSpecialFirstState(n)}()},children:"\u66f4\u65b0 "})]})},ue=s.ZP.div.withConfig({displayName:"difficultySelector__DifficultySelectorDiv",componentId:"sc-pakp5b-0"})(["margin:0 auto;margin-left:1em;zoom:3;"]),le=function(e){var t=e.states,n=e.funs,r=(0,i.useState)($),o=r[0],a=r[1],s=n.refreshStateWithDifficulty,c={easy:"easy"===t.nowFirstState.difficulty,middle:"middle"===t.nowFirstState.difficulty,difficult:"difficult"===t.nowFirstState.difficulty,special:"special"===t.nowFirstState.difficulty},u={easy:{displayName:"\u521d\u7d1a",firstState:L,isActive:c.easy},middle:{displayName:"\u4e2d\u7d1a",firstState:U,isActive:c.middle},difficult:{displayName:"\u4e0a\u7d1a",firstState:R,isActive:c.difficult},special:{displayName:"\u30b9\u30da\u30b7\u30e3\u30eb",firstState:o,isActive:c.special}};return c.special?(0,M.jsxs)(ue,{children:[(0,M.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.easy}),(0,M.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.middle}),(0,M.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.difficult}),(0,M.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.special}),(0,M.jsx)(ce,{funs:{refreshStateWithDifficulty:s,setSpecialFirstState:a}})]}):(0,M.jsxs)(ue,{children:[(0,M.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.easy}),(0,M.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.middle}),(0,M.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.difficult}),(0,M.jsx)(ne,{funs:{refreshStateWithDifficulty:s},consts:u.special})]})},fe=s.ZP.div.withConfig({displayName:"page__Container",componentId:"sc-1qm7lto-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;min-height:100vh;padding:0 0.5rem;"]),de=s.ZP.main.withConfig({displayName:"page__Main",componentId:"sc-1qm7lto-1"})(["display:flex;flex:1;flex-direction:column;align-items:center;justify-content:center;padding:5rem 0;zoom:27%;"]),me=(s.ZP.footer.withConfig({displayName:"page__Footer",componentId:"sc-1qm7lto-2"})(["display:flex;align-items:center;justify-content:center;width:100%;height:100px;border-top:1px solid #eaeaea;a{display:flex;flex-grow:1;align-items:center;justify-content:center;}"]),s.ZP.span.withConfig({displayName:"page__Logo",componentId:"sc-1qm7lto-3"})(["height:1em;margin-left:0.5rem;"]),function(){"undefined"!==typeof document&&(document.oncontextmenu=function(){return!1});var e=(0,i.useState)(L),t=e[0],n=e[1],o=function(){u(Q),b(ee),x(K),j(0),Z()},a=(0,i.useState)(Q),s=a[0],u=a[1],l=(0,i.useState)(t.board),f=l[0],d=l[1],m=(0,i.useState)(ee),p=m[0],b=m[1],h=(0,i.useState)(K),y=h[0],x=h[1],g=(0,i.useState)(c(t.bomNum,t.sizeX,t.sizeY)),z=g[0],v=g[1],S=(0,i.useState)(0),w=S[0],j=S[1],_=(0,i.useState)({sizeX:t.sizeX,sizeY:t.sizeY}),N=_[0],P=_[1],C={gameState:s,board:f,flgPosition:p,count:y,boms:z,pushedBlockNum:w,boardSize:N},k=(0,i.useRef)(null),I=(0,i.useCallback)((function(){null===k.current&&(k.current=window.setInterval((function(){x((function(e){return e+1}))}),1e3))}),[]),Z=(0,i.useCallback)((function(){null!==k.current&&(clearInterval(k.current),k.current=null)}),[]);return(0,M.jsxs)(fe,{children:[(0,M.jsxs)(r.default,{children:[(0,M.jsx)("title",{children:"Create Next App"}),(0,M.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,M.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,M.jsxs)(de,{children:[(0,M.jsx)(le,{states:{boardSize:N,boms:z,nowFirstState:t},funs:{refreshStateWithDifficulty:function(e){o(),n(e),P({sizeX:e.sizeX,sizeY:e.sizeY}),d(e.board),v(c(e.bomNum,e.sizeX,e.sizeY))}}}),(0,M.jsx)(V,{parentStates:C,funs:{refreshState:function(){o(),P({sizeX:t.sizeX,sizeY:t.sizeY}),d(t.board),v(c(t.bomNum,t.sizeX,t.sizeY))},checkGameStart:function(){-1===s&&(u(0),I())},setGameover:function(){u(99),Z()},setGameClear:function(){u(1),Z()},setGameState:u,setPushedBlockNum:j,setFlgPosition:b,setBoard:d}})]})]})})},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6643)}])}},function(e){e.O(0,[835,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);